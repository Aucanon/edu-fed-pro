"use strict";(self["webpackChunkedu_fed"]=self["webpackChunkedu_fed"]||[]).push([[507],{818:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"edit-advert"},[t("el-card",{staticStyle:{padding:"20px"}},[t("el-form",{attrs:{"label-width":"80px",rules:e.rules,model:e.adverts}},[t("el-form-item",{attrs:{label:"广告名称",prop:"name"}},[t("el-input",{model:{value:e.adverts.name,callback:function(t){e.$set(e.adverts,"name",t)},expression:"adverts.name"}})],1),t("el-form-item",{attrs:{label:"广告位置",prop:"spaceId"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.adverts.spaceId,callback:function(t){e.$set(e.adverts,"spaceId",t)},expression:"adverts.spaceId"}},[t("el-option",{attrs:{value:"1"}},[e._v("1")]),t("el-option",{attrs:{value:"2"}},[e._v("2")])],1)],1),t("el-form-item",{attrs:{label:"开始时间",prop:"startTime"}},[t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始时间"},model:{value:e.adverts.startTime,callback:function(t){e.$set(e.adverts,"startTime",t)},expression:"adverts.startTime"}})],1),t("el-form-item",{attrs:{label:"到期时间",prop:"endTime"}},[t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择到期时间"},model:{value:e.adverts.endTime,callback:function(t){e.$set(e.adverts,"endTime",t)},expression:"adverts.endTime"}})],1),t("el-form-item",{attrs:{label:"上线/下线"}},[t("el-radio",{attrs:{label:0},model:{value:e.adverts.status,callback:function(t){e.$set(e.adverts,"status",t)},expression:"adverts.status"}},[e._v("下线")]),t("el-radio",{attrs:{label:1},model:{value:e.adverts.status,callback:function(t){e.$set(e.adverts,"status",t)},expression:"adverts.status"}},[e._v("上线")])],1),t("el-form-item",{attrs:{label:"广告图片",prop:"img"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"before-upload":e.beforeAvatarUpload,"on-success":e.handleAvatarSuccess,"http-request":e.handleUpload}},[e.adverts.img?t("img",{staticClass:"avatar",attrs:{src:e.adverts.img}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t("el-form-item",{attrs:{label:"广告链接",prop:"link"}},[t("el-input",{model:{value:e.adverts.link,callback:function(t){e.$set(e.adverts,"link",t)},expression:"adverts.link"}})],1),t("el-form-item",{attrs:{label:"广告备注",prop:"text"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.adverts.text,callback:function(t){e.$set(e.adverts,"text",t)},expression:"adverts.text"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")])],1)],1)],1)],1)},r=[],i=(a(7658),a(2936)),l={name:"EditAdvert",data(){return{adverts:{id:null,name:"",spaceId:0,keyword:"",htmlContent:"",text:"",img:"",link:"",startTime:"",endTime:"",createTime:"",updateTime:"",status:0,priority:0,startTimeFormatString:"",endTimeFormatString:""},isUpLoading:!1,limit:2,rules:{name:[{required:!0,message:"请输入广告名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],startTime:{required:!0,message:"请输入开始时间",trigger:"blur"},endTime:{required:!0,message:"请输入到期时间",trigger:"blur"},link:{required:!0,message:"请输入广告链接",trigger:"blur"}}}},created(){this.loadAdert()},methods:{beforeAvatarUpload(e){const t="image/jpeg"===e.type,a=e.size/1024/1024<this.limit;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},handleAvatarSuccess(e,t){this.imageUrl=URL.createObjectURL(t.raw)},async handleUpload(e){this.isUpLoading=!0;const t=new FormData;t.append("file",e.file);const{data:a}=await(0,i.Ix)(t);1===a.state&&(this.adverts.img=a.content.name,this.isUpLoading=!1)},loadAdert(){this.adverts.id=this.$route.query.id,this.adverts.name=this.$route.query.name,this.adverts.spaceId=this.$route.query.spaceId,this.adverts.img=this.$route.query.img,this.adverts.link=this.$route.query.link,this.adverts.text=this.$route.query.text,this.adverts.startTime=this.$route.query.startTime,this.adverts.endTime=this.$route.query.endTime,this.adverts.status=this.$route.query.status},onSubmit(){this.$confirm("是否提交数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const{data:e}=await(0,i.hr)(this.adverts);console.log(e),1===e.state&&(this.$message({type:"success",message:"编辑成功!"}),this.$router.push({name:"advert"}))})).catch((()=>{this.$message({type:"info",message:"已取消提交"})}))}}},d=l,n=a(1001),o=(0,n.Z)(d,s,r,!1,null,"22d3364f",null),u=o.exports},2936:function(e,t,a){a.d(t,{Ix:function(){return d},VR:function(){return i},hW:function(){return r},hr:function(){return n},s1:function(){return l},zZ:function(){return o}});var s=a(5286);const r=()=>(0,s.Z)({method:"GET",url:"/front/ad/getAdList"}),i=()=>(0,s.Z)({method:"GET",url:"/front/ad/space/getAllSpaces"}),l=e=>(0,s.Z)({method:"GET",url:"/front/ad/updateStatus",params:e}),d=e=>(0,s.Z)({method:"POST",url:"/front/upload/img",data:e}),n=e=>(0,s.Z)({method:"POST",url:"/front/ad/saveOrUpdate",data:e}),o=e=>(0,s.Z)({method:"POST",url:"/front/ad/space/saveOrUpdate",data:e})}}]);
//# sourceMappingURL=advert-edit.c921626e.js.map