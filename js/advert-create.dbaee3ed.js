"use strict";(self["webpackChunkedu_fed"]=self["webpackChunkedu_fed"]||[]).push([[441],{8637:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"add-advert"},[t("el-card",{staticStyle:{padding:"20px"}},[t("el-form",{ref:"adverts",attrs:{"label-width":"80px",rules:e.rules,model:e.adverts}},[t("el-form-item",{attrs:{label:"广告名称",prop:"name"}},[t("el-input",{model:{value:e.adverts.name,callback:function(t){e.$set(e.adverts,"name",t)},expression:"adverts.name"}})],1),t("el-form-item",{attrs:{label:"广告位置",prop:"spaceId"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.adverts.spaceId,callback:function(t){e.$set(e.adverts,"spaceId",t)},expression:"adverts.spaceId"}},[t("el-option",{attrs:{value:"1"}},[e._v("1")]),t("el-option",{attrs:{value:"2"}},[e._v("2")])],1)],1),t("el-form-item",{attrs:{label:"开始时间",prop:"startTime"}},[t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始时间"},model:{value:e.adverts.startTime,callback:function(t){e.$set(e.adverts,"startTime",t)},expression:"adverts.startTime"}})],1),t("el-form-item",{attrs:{label:"到期时间",prop:"endTime"}},[t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择到期时间"},model:{value:e.adverts.endTime,callback:function(t){e.$set(e.adverts,"endTime",t)},expression:"adverts.endTime"}})],1),t("el-form-item",{attrs:{label:"上线/下线",prop:"status"}},[t("el-radio",{attrs:{label:0},model:{value:e.adverts.status,callback:function(t){e.$set(e.adverts,"status",t)},expression:"adverts.status"}},[e._v("下线")]),t("el-radio",{attrs:{label:1},model:{value:e.adverts.status,callback:function(t){e.$set(e.adverts,"status",t)},expression:"adverts.status"}},[e._v("上线")])],1),t("el-form-item",{attrs:{label:"广告图片",prop:"img"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"before-upload":e.beforeAvatarUpload,"on-success":e.handleAvatarSuccess,"http-request":e.handleUpload}},[e.adverts.img?t("img",{staticClass:"avatar",attrs:{src:e.adverts.img}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t("el-form-item",{attrs:{label:"广告链接",prop:"link"}},[t("el-input",{model:{value:e.adverts.link,callback:function(t){e.$set(e.adverts,"link",t)},expression:"adverts.link"}})],1),t("el-form-item",{attrs:{label:"广告备注",prop:"text"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.adverts.text,callback:function(t){e.$set(e.adverts,"text",t)},expression:"adverts.text"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),t("el-button",{on:{click:e.onReset}},[e._v("重置")])],1)],1)],1)],1)},r=[],l=(a(7658),a(2936)),i={name:"AddAdvert",data(){return{adverts:{name:"",spaceId:0,img:"",link:"",text:"",startTime:"",endTime:"",status:0},isUpLoading:!1,limit:2,rules:{name:[{required:!0,message:"请输入广告名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],startTime:{required:!0,message:"请输入开始时间",trigger:"blur"},endTime:{required:!0,message:"请输入到期时间",trigger:"blur"},link:{required:!0,message:"请输入广告链接",trigger:"blur"}}}},methods:{beforeAvatarUpload(e){const t="image/jpeg"===e.type,a=e.size/1024/1024<this.limit;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},handleAvatarSuccess(e,t){this.imageUrl=URL.createObjectURL(t.raw)},async handleUpload(e){this.isUpLoading=!0;const t=new FormData;t.append("file",e.file);const{data:a}=await(0,l.Ix)(t);1===a.state&&(this.adverts.img=a.content.name,this.isUpLoading=!1)},onSubmit(){this.$confirm("是否提交数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const{data:e}=await(0,l.hr)(this.adverts);console.log(e),1===e.state&&(this.$message({type:"success",message:"添加成功!"}),this.$router.push({name:"advert"}))})).catch((()=>{this.$message({type:"info",message:"已取消提交"})}))},onReset(){this.$refs.adverts.resetFields()}}},n=i,d=a(1001),o=(0,d.Z)(n,s,r,!1,null,"7d4a3cf2",null),u=o.exports},2936:function(e,t,a){a.d(t,{Ix:function(){return n},VR:function(){return l},hW:function(){return r},hr:function(){return d},s1:function(){return i},zZ:function(){return o}});var s=a(5286);const r=()=>(0,s.Z)({method:"GET",url:"/front/ad/getAdList"}),l=()=>(0,s.Z)({method:"GET",url:"/front/ad/space/getAllSpaces"}),i=e=>(0,s.Z)({method:"GET",url:"/front/ad/updateStatus",params:e}),n=e=>(0,s.Z)({method:"POST",url:"/front/upload/img",data:e}),d=e=>(0,s.Z)({method:"POST",url:"/front/ad/saveOrUpdate",data:e}),o=e=>(0,s.Z)({method:"POST",url:"/front/ad/space/saveOrUpdate",data:e})}}]);
//# sourceMappingURL=advert-create.dbaee3ed.js.map