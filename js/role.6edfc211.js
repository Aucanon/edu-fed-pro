"use strict";(self["webpackChunkedu_fed"]=self["webpackChunkedu_fed"]||[]).push([[647],{8709:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"role"},[t("role-list")],1)},o=[],i=(a(7658),function(){var e=this,t=e._self._c;return t("div",{staticClass:"role-list"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-form",{ref:"form",attrs:{model:e.form,"label-position":"right","label-width":"80px"}},[t("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[t("el-input",{attrs:{clearable:"",placeholder:"角色名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",[t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),t("el-button",{on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),t("el-button",{on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加角色")]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:e.roles}},[t("el-table-column",{attrs:{prop:"id",label:"编号",width:"180",align:"center"}}),t("el-table-column",{attrs:{prop:"name",label:"角色名称",width:"180",align:"center"}}),t("el-table-column",{attrs:{prop:"description",label:"描述",align:"center"}}),t("el-table-column",{attrs:{prop:"createdTime",label:"添加时间",align:"center"}}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$router.push({name:"alloc-menu",params:{roleId:a.row.id}})}}},[e._v("分配菜单")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$router.push({name:"alloc-resource",params:{roleId:a.row.id}})}}},[e._v("分配资源")])],1),t("div",[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDelete(a.row)}}},[e._v("删除")])],1)]}}])})],1),t("el-dialog",{attrs:{title:e.isEdit?"编辑角色":"添加角色",visible:e.dialogVisible,width:"30%","before-close":e.closeHandler},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"gridData",attrs:{model:e.gridData,"label-position":"right","label-width":"80px"}},[t("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[t("el-input",{attrs:{clearable:""},model:{value:e.gridData.name,callback:function(t){e.$set(e.gridData,"name",t)},expression:"gridData.name"}})],1),t("el-form-item",{attrs:{label:"角色编码",prop:"code"}},[t("el-input",{attrs:{clearable:""},model:{value:e.gridData.code,callback:function(t){e.$set(e.gridData,"code",t)},expression:"gridData.code"}})],1),t("el-form-item",{attrs:{label:"角色描述",prop:"description"}},[t("el-input",{attrs:{type:"textarea",clearable:""},model:{value:e.gridData.description,callback:function(t){e.$set(e.gridData,"description",t)},expression:"gridData.description"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeHandler}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)],1)],1)],1)}),r=[],s=a(2307),n={name:"RoleList",data(){return{form:{name:""},isLoading:!1,roles:[],isEdit:!1,dialogVisible:!1,gridData:{id:null,code:"",name:"",description:""}}},created(){this.loadRoles()},methods:{async loadRoles(){this.isLoading=!0;const{data:e}=await(0,s.VZ)(this.form);"000000"===e.code&&(this.roles=e.data.records,this.isLoading=!1)},onReset(){this.$refs.form.resetFields(),this.form.name="",this.loadRoles()},onSearch(){this.loadRoles()},async onSubmit(){const{data:e}=await(0,s.bM)(this.gridData);"000000"===e.code&&(this.loadRoles(),this.closeHandler())},closeHandler(){this.dialogVisible=!1,this.$refs.gridData.resetFields()},handleEdit(e){this.isEdit=!0,this.dialogVisible=!0,this.gridData.id=e.id,this.gridData.name=e.name,this.gridData.code=e.code,this.gridData.description=e.description},handleDelete(e){this.$confirm("确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const{data:t}=await(0,s.Rd)(e.id);"000000"===t.code&&(this.loadRoles(),this.$message({type:"success",message:"删除成功!"}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))}}},d=n,c=a(1001),u=(0,c.Z)(d,i,r,!1,null,"629bfb49",null),m=u.exports,p={name:"RoleIndex",components:{RoleList:m}},b=p,f=(0,c.Z)(b,l,o,!1,null,"7c4aa33e",null),h=f.exports},2307:function(e,t,a){a.d(t,{Jm:function(){return d},Rd:function(){return i},VZ:function(){return o},bM:function(){return r},uD:function(){return n},xJ:function(){return s}});var l=a(5286);const o=e=>(0,l.Z)({method:"POST",url:"/boss/role/getRolePages",data:e}),i=e=>(0,l.Z)({method:"DELETE",url:`/boss/role/${e}`}),r=e=>(0,l.Z)({method:"POST",url:"/boss/role/saveOrUpdate",data:e}),s=()=>(0,l.Z)({method:"GET",url:"/boss/role/all"}),n=e=>(0,l.Z)({method:"POST",url:"/boss/role/allocateUserRoles",data:e}),d=e=>(0,l.Z)({method:"GET",url:`/boss/role/user/${e}`})}}]);
//# sourceMappingURL=role.6edfc211.js.map