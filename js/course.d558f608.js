"use strict";(self["webpackChunkedu_fed"]=self["webpackChunkedu_fed"]||[]).push([[449],{4784:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var s=function(){var e=this,t=e._self._c;return t("div",[t("course-list")],1)},r=[],o=(a(7658),function(){var e=this,t=e._self._c;return t("div",{staticClass:"course-list"},[t("el-form",{ref:"form",attrs:{inline:!0,"label-position":"left",model:e.filterParams}},[t("el-form-item",{attrs:{label:"课程名称：",prop:"courseName"}},[t("el-input",{attrs:{placeholder:"课程名称"},model:{value:e.filterParams.courseName,callback:function(t){e.$set(e.filterParams,"courseName",t)},expression:"filterParams.courseName"}})],1),t("el-form-item",{attrs:{label:"状态：",prop:"status"}},[t("el-select",{model:{value:e.filterParams.status,callback:function(t){e.$set(e.filterParams,"status",t)},expression:"filterParams.status"}},[t("el-option",{attrs:{label:"全部",value:""}}),t("el-option",{attrs:{label:"上架",value:"1"}}),t("el-option",{attrs:{label:"下架",value:"0"}})],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",disabled:e.isLoading},on:{click:e.handleFilter}},[e._v("查询 ")]),t("el-button",{attrs:{disabled:e.isLoading},on:{click:e.handleReset}},[e._v("重置 ")])],1),t("el-form-item",{staticStyle:{float:"right"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push({name:"course-create"})}}},[t("i",{staticClass:"el-icon-plus"}),e._v(" 添加课程 ")])],1)],1),t("el-card",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.courses}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",align:"center"}}),t("el-table-column",{attrs:{prop:"courseName",label:"课程名称",align:"center"}}),t("el-table-column",{attrs:{prop:"price",label:"价格",formatter:e.formatter,align:"center"}}),t("el-table-column",{attrs:{prop:"sortNum",label:"排序",align:"center"}}),t("el-table-column",{attrs:{prop:"status",label:"上架状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0,disabled:a.row.isStatusLoading},on:{change:function(t){return e.onStateChange(a.row)}},model:{value:a.row.status,callback:function(t){e.$set(a.row,"status",t)},expression:"scope.row.status"}})]}}])}),t("el-table-column",{attrs:{prop:"price",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{on:{click:function(t){return e.$router.push({name:"course-edit",params:{courseId:a.row.id}})}}},[e._v("编辑")]),t("el-button",{on:{click:function(t){return e.$router.push({name:"course-section",params:{courseId:a.row.id,courseName:a.row.courseName}})}}},[e._v("内容管理 ")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.filterParams.currentPage,"page-sizes":[10,15,20],"page-size":e.filterParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount,disabled:e.isLoading},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)}),n=[],l=a(8219),i={name:"CourseList",data(){return{filterParams:{currentPage:1,pageSize:10,courseName:"",status:""},courses:[],totalCount:0,isLoading:!0}},created(){this.loadCourses()},methods:{async onStateChange(e){e.isStatusLoading=!0;const{data:t}=await(0,l.$p)({courseId:e.id,status:e.status});"000000"===t.code&&(this.$message.success((1===e.status?"上架":"下架")+"成功"),e.isStatusLoading=!1)},async loadCourses(){this.isLoading=!0;const{data:e}=await(0,l.a7)(this.filterParams);"000000"===e.code&&(e.data.records.forEach((e=>{e.isStatusLoading=!1})),this.courses=e.data.records,this.totalCount=e.data.total,this.isLoading=!1)},handleSizeChange(e){this.filterParams.pageSize=e,this.filterParams.currentPage=1,this.loadCourses()},handleCurrentChange(e){this.filterParams.currentPage=e,this.loadCourses()},handleFilter(){this.filterParams.currentPage=1,this.loadCourses()},handleReset(){this.$refs.form.resetFields(),this.filterParams.currentPage=1,this.loadCourses()},formatter(e){return`￥${e.price}`}}},u=i,c=a(1001),d=(0,c.Z)(u,o,n,!1,null,"21cd21e3",null),m=d.exports,f={name:"CourseIndex",components:{CourseList:m}},p=f,h=(0,c.Z)(p,s,r,!1,null,"1dfd1568",null),g=h.exports},8219:function(e,t,a){a.d(t,{$p:function(){return o},NI:function(){return l},Yt:function(){return i},a7:function(){return r},dR:function(){return c},jt:function(){return n},ob:function(){return u},sq:function(){return d}});var s=a(5286);const r=e=>(0,s.Z)({method:"POST",url:"/boss/course/getQueryCourses",data:e}),o=e=>(0,s.Z)({method:"GET",url:"/boss/course/changeState",params:e}),n=e=>(0,s.Z)({method:"POST",url:"/boss/course/saveOrUpdateCourse",data:e}),l=(e,t)=>(0,s.Z)({method:"POST",url:"/boss/course/upload",data:e,onUploadProgress:t}),i=e=>(0,s.Z)({method:"GET",url:`/boss/course/getCourseById?courseId=${e}`}),u=e=>(0,s.Z)({method:"GET",url:`/boss/course/section/getSectionAndLesson?courseId=${e}`}),c=e=>(0,s.Z)({method:"POST",url:"/boss/course/section/saveOrUpdateSection",data:e}),d=e=>(0,s.Z)({method:"POST",url:"/boss/course/lesson/saveOrUpdate",data:e})}}]);
//# sourceMappingURL=course.d558f608.js.map