"use strict";(self["webpackChunkedu_fed"]=self["webpackChunkedu_fed"]||[]).push([[893],{1419:function(e,t,s){s.r(t),s.d(t,{default:function(){return l}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"alloc-menu"},[t("el-card",[t("el-tree",{ref:"menu-tree",attrs:{"node-key":"id",data:e.menus,props:e.defaultProps,"show-checkbox":"","default-expand-all":"","default-checked-keys":e.checkedKeys},on:{"node-click":e.handleNodeClick}}),t("div",{staticStyle:{margin:"20px"}},[t("el-button",{on:{click:e.onReset}},[e._v("清空")]),t("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("保存")])],1)],1)],1)},u=[],o=(s(7658),s(4503)),d={name:"AllocMenu",props:{roleId:{type:[Number,String],required:!0}},data(){return{menus:[],defaultProps:{children:"subMenuList",label:"name"},checkedKeys:[]}},created(){this.loadMenus(),this.loadRoleMenus()},methods:{async loadMenus(){const{data:e}=await(0,o.Wr)();"000000"===e.code&&(this.menus=e.data)},async onSave(){const{data:e}=await(0,o.nv)({roleId:this.roleId,menuIdList:this.$refs["menu-tree"].getCheckedKeys()});"000000"===e.code&&(this.$message.success("保存成功！"),this.$router.push({name:"role"}))},async loadRoleMenus(){const{data:e}=await(0,o._L)(this.roleId);"000000"===e.code&&this.getCheckedKeys(e.data)},getCheckedKeys(e){e.forEach((e=>{if(e.selected)return e.subMenuList?this.getCheckedKeys(e.subMenuList):void(this.checkedKeys=[...this.checkedKeys,e.id])}))},onReset(){this.$refs["menu-tree"].setCheckedKeys([])}}},r=d,a=s(1001),c=(0,a.Z)(r,n,u,!1,null,"4c09d0ce",null),l=c.exports},4503:function(e,t,s){s.d(t,{RD:function(){return r},Wr:function(){return a},_L:function(){return l},kJ:function(){return u},lj:function(){return o},nv:function(){return c},xz:function(){return d}});var n=s(5286);const u=e=>(0,n.Z)({method:"GET",url:`/boss/menu/getEditMenuInfo?id=${e}`}),o=e=>(0,n.Z)({method:"POST",url:"boss/menu/saveOrUpdate",data:e}),d=()=>(0,n.Z)({method:"GET",url:"/boss/menu/getAll"}),r=e=>(0,n.Z)({method:"DELETE",url:`/boss/menu/${e}`}),a=()=>(0,n.Z)({method:"GET",url:"/boss/menu/getMenuNodeList"}),c=e=>(0,n.Z)({method:"POST",url:"/boss/menu/allocateRoleMenus",data:e}),l=e=>(0,n.Z)({method:"GET",url:`/boss/menu/getRoleMenus?roleId=${e}`})}}]);
//# sourceMappingURL=alloc-menu.330f64d4.js.map