"use strict";(self["webpackChunkedu_fed"]=self["webpackChunkedu_fed"]||[]).push([[177],{5652:function(e,r,t){t.r(r),t.d(r,{default:function(){return g}});var o=function(){var e=this,r=e._self._c;return r("div",{staticClass:"resource"},[r("resource-list")],1)},s=[],a=(t(7658),function(){var e=this,r=e._self._c;return r("div",{staticClass:"resource-list"},[r("el-card",{staticClass:"box-class"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("el-form",{ref:"form",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form}},[r("el-form-item",{attrs:{label:"资源名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"资源名称",clearable:""},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"资源路径",prop:"url"}},[r("el-input",{attrs:{placeholder:"资源路径",clearable:""},model:{value:e.form.url,callback:function(r){e.$set(e.form,"url",r)},expression:"form.url"}})],1),r("el-form-item",{attrs:{label:"资源分类",prop:"categoryId"}},[r("el-select",{attrs:{placeholder:"资源分类",clearable:""},model:{value:e.form.categoryId,callback:function(r){e.$set(e.form,"categoryId",r)},expression:"form.categoryId"}},e._l(e.resourceCategory,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",[r("el-button",{on:{click:e.onReset}},[e._v("重置")]),r("el-button",{attrs:{type:"primary",disabled:e.isLoading},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),r("el-button",{attrs:{size:"mini"},on:{click:e.handleAdd}},[e._v("添加")]),r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.$router.push({name:"resource-category"})}}},[e._v("资源分类")]),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:e.resources}},[r("el-table-column",{attrs:{prop:"id",label:"编号",width:"100",align:"center"}}),r("el-table-column",{attrs:{prop:"name",label:"资源名称",align:"center"}}),r("el-table-column",{attrs:{prop:"url",label:"资源路径",align:"center"}}),r("el-table-column",{attrs:{prop:"description",label:"描述",align:"center"}}),r("el-table-column",{attrs:{label:"添加时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("dataFormat")(t.row.createdTime)))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.handleEdit(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),r("el-dialog",{attrs:{title:e.isEdit?"编辑分类":"添加分类",visible:e.dialogFormVisible,"before-close":e.closeHandler,width:"400px"},on:{"update:visible":function(r){e.dialogFormVisible=r}}},[r("el-form",{ref:"resourceForm",attrs:{model:e.resourceForm,"label-position":"right","label-width":"80px"}},[r("el-form-item",{attrs:{label:"资源名称",prop:"name"}},[r("el-col",{attrs:{span:20}},[r("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.resourceForm.name,callback:function(r){e.$set(e.resourceForm,"name",r)},expression:"resourceForm.name"}})],1)],1),r("el-form-item",{attrs:{label:"资源路径",prop:"url"}},[r("el-col",{attrs:{span:20}},[r("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.resourceForm.url,callback:function(r){e.$set(e.resourceForm,"url",r)},expression:"resourceForm.url"}})],1)],1),r("el-form-item",{attrs:{label:"资源分类",prop:"categoryId"}},[r("el-select",{attrs:{size:"mini",clearable:""},model:{value:e.resourceForm.categoryId,callback:function(r){e.$set(e.resourceForm,"categoryId",r)},expression:"resourceForm.categoryId"}},e._l(e.resourceCategory,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"描述",prop:"description"}},[r("el-col",{attrs:{span:20}},[r("el-input",{attrs:{type:"textarea",size:"mini",clearable:""},model:{value:e.resourceForm.description,callback:function(r){e.$set(e.resourceForm,"description",r)},expression:"resourceForm.description"}})],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeHandler}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addOrUpdateResource}},[e._v("确 定")])],1)],1),r("el-pagination",{attrs:{"current-page":e.form.current,"page-sizes":[10,15,20],"page-size":e.form.size,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount,disabled:e.isLoading},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)}),l=[],i=t(7304),n={name:"ResourceList",data(){return{form:{current:1,size:10,name:"",url:"",categoryId:""},resources:[],totalCount:0,resourceCategory:{},isLoading:!1,gridData:[],dialogFormVisible:!1,resourceForm:{id:null,name:"",categoryId:0,url:"",description:""},isEdit:!1}},methods:{onSubmit(){this.form.current=1,this.loadResource()},onReset(){this.$refs.form.resetFields()},async loadResource(){this.isLoading=!0;const{data:e}=await(0,i.RT)(this.form);"000000"===e.code&&(this.resources=e.data.records,this.totalCount=e.data.total,this.isLoading=!1)},async loadResourceCategories(){const{data:e}=await(0,i.Jh)();"000000"===e.code&&(this.resourceCategory=e.data)},async addOrUpdateResource(){const{data:e}=await(0,i.LR)(this.resourceForm);"000000"===e.code&&(this.loadResource(),this.dialogFormVisible=!1,this.$refs.resourceForm.resetFields())},closeHandler(){this.dialogFormVisible=!1,this.$refs.resourceForm.resetFields()},handleAdd(){this.isEdit=!1,this.dialogFormVisible=!0},handleEdit(e){this.isEdit=!0,this.dialogFormVisible=!0,this.resourceForm.id=e.id,this.resourceForm.name=e.name,this.resourceForm.url=e.url,this.resourceForm.categoryId=e.categoryId,this.resourceForm.description=e.description},async handleDelete(e){this.$confirm("确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const{data:r}=await(0,i.fg)(e.id);"000000"===r.code&&(this.loadResource(),this.$message({type:"success",message:"删除成功!"}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},handleSizeChange(e){this.form.size=e,this.form.current=1,this.loadResource(this.form)},handleCurrentChange(e){this.form.current=e,this.loadResource(this.form)}},created(){this.loadResource(),this.loadResourceCategories()},filters:{dataFormat(e){e=new Date(e);const r=e.getFullYear(),t=e.getMonth()+1,o=e.getDate(),s=e.getHours(),a=e.getMinutes(),l=e.getSeconds(),i=e=>(e=e.toString(),e[1]?e:`0${e}`);return`${[r,t,o].map(i).join("/")} ${[s,a,l].map(i).join(":")}`}}},c=n,u=t(1001),d=(0,u.Z)(c,a,l,!1,null,"16327cba",null),m=d.exports,f={name:"ResourceIndex",components:{ResourceList:m}},p=f,h=(0,u.Z)(p,o,s,!1,null,"f4080266",null),g=h.exports},7304:function(e,r,t){t.d(r,{Jh:function(){return l},KQ:function(){return c},LR:function(){return i},RT:function(){return a},fg:function(){return n},h:function(){return f},iA:function(){return s},u_:function(){return u},uu:function(){return d},xK:function(){return m}});var o=t(5286);const s=()=>(0,o.Z)({method:"GET",url:"/boss/resource/getAll"}),a=e=>(0,o.Z)({method:"POST",url:"/boss/resource/getResourcePages",data:e}),l=()=>(0,o.Z)({method:"GET",url:"/boss/resource/category/getAll"}),i=e=>(0,o.Z)({method:"POST",url:"/boss/resource/saveOrUpdate",data:e}),n=e=>(0,o.Z)({method:"DELETE",url:`/boss/resource/${e}`}),c=()=>(0,o.Z)({method:"GET",url:"/boss/resource/category/getAll"}),u=e=>(0,o.Z)({method:"POST",url:"/boss/resource/category/saveOrderUpdate",data:e}),d=e=>(0,o.Z)({method:"DELETE",url:`/boss/resource/category/${e}`}),m=e=>(0,o.Z)({method:"GET",url:`/boss/resource/getRoleResources?roleId=${e}`}),f=e=>(0,o.Z)({method:"POST",url:"/boss/resource/allocateRoleResources",data:e})}}]);
//# sourceMappingURL=home.b27da1a6.js.map